<%= render :partial => 'shared/nav' %>
<%= render :partial => 'shared/profile_header', :locals => {:user => @user} %>

<!-- Profile Page / Friends -->
<section id="friends" class="row profile-page-container">
  
  <header class="col-xs-12 profile-page-header">
    <h1>
      <%= @user.name %>'s Friends
    </h1>
  </header>

  <!-- Friends -->
  <div class="col-xs-12 friends-container">

    <div class="row">
      
      <% if @user.friendships.present? %>

        <% @user.friendships.each do |friendship| %>

          <%
          friend = friendship.initiator == @user ? friendship.approver : friendship.initiator
          %>
          
          <!-- Friend -->
          <div class="col-sm-12 col-md-6 friend-container">
            <div class="row">
              <div class="col-xs-12 col-sm-4">
                <div class="profile-image-container">
                  <a href="#">
                    <img src="/assets/images/user_silhouette_generic.gif.png" alt="Image"/>
                  </a>
                </div>
              </div>
              <div class="col-xs-12 col-sm-3 col-sm-offset-1 friend-info-container">
                
                <%= link_to(friend.name, user_path(friend)) %>

                <br>
                <span class="friend-friends-count">
                  <%= friend.friends.length %> Friends
                </span>
              </div>
              <div class="col-xs-12 col-sm-3 col-sm-offset-1 unfriend-link-container">

                <%= link_to('- Unfriend', friendship_path(
                  friendship,
                  :user_id => current_user.id,
                  :initiator_id => friendship.initiator_id,
                  :approver_id => friendship.approver_id
                ), :method => :delete, :class => 'btn btn-danger') %>

              </div>
            </div>
          </div>

        <% end %>

      <% else %>

        <div class="col-xs-12 friend-container no-friends">
          No friends
        </div>

      <% end %>

    </div><!-- row -->

  </div><!-- .friends-container -->

</section><!-- #friends -->


