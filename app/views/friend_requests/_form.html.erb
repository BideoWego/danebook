<% query_string_params = {
  :user_id => current_user.id,
  :initiator_id => friend_request.initiator_id,
  :approver_id => friend_request.approver_id
} %>

<%= friend_request.persisted? ? 'Friend Request Pending: ' : '' %>

<% if friend_request.approver == current_user %>

  <%= link_to('Accept', friend_request_path(
    friend_request,
    query_string_params
  ), :method => :put) %>

  <%= link_to('Reject', friend_request_path(
    friend_request,
    query_string_params
  ), :method => :delete, :class => 'text-danger') %>

<% elsif friend_request.initiator == current_user %>

  <%= link_to('Cancel', friend_request_path(
    friend_request,
    query_string_params
  ), :method => :delete, :class => 'text-danger') %>

<% else %>

  <%= link_to('+ Add Friend', friend_requests_path(
    friend_request,
    :user_id => current_user.id,
    :initiator_id => current_user.id,
    :approver_id => user.id
  ), :method => :post) %>

<% end %>

